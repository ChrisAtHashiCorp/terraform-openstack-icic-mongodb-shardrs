#cloud-config
fqdn: ${fqdn}

ssh_pwauth: true
disable_root: false
password: HashiPass123!
chpasswd:
  expire: false

write_files:
  - path: /etc/mongod.conf
    encoding: b64
    content: ${mongod-config}

  - path: /etc/hosts
    encoding: b64
    append: true
    content: ${hostsfile}

  - path: /tmp/replicaset-cfg.js
    encoding: b64
    content: ${replicaset-config}

runcmd:
  - setenforce Permissive
  - update-ca-trust
  - systemctl daemon-reload
  - systemctl enable --now mongod.service
  - systemctl enable --now httpd.service
